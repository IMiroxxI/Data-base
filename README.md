# 11.1 Базы данных, их типы

### Задание 1. СУБД

### Кейс
Крупная строительная компания, которая также занимается проектированием и девелопментом, решила создать 
правильную архитектуру для работы с данными. Ниже представлены задачи, которые необходимо решить для
каждой предметной области. 

Какие типы СУБД, на ваш взгляд, лучше всего подойдут для решения этих задач и почему? 
 
1.1. Бюджетирование проектов с дальнейшим формированием финансовых аналитических отчётов и прогнозирования рисков.
СУБД должна гарантировать целостность и чёткую структуру данных.

1.1.* Хеширование стало занимать длительно время, какое API можно использовать для ускорения работы? 

1.2. Под каждый девелоперский проект создаётся отдельный лендинг, и все данные по лидам стекаются в CRM к 
маркетологам и менеджерам по продажам. Какой тип СУБД лучше использовать для лендингов и для CRM? 
СУБД должны быть гибкими и быстрыми.

1.2.* Можно ли эту задачу закрыть одной СУБД? И если да, то какой именно СУБД и какой реализацией?

1.3. Отдел контроля качества решил создать базу по корпоративным нормам и правилам, обучающему материалу 
и так далее, сформированную согласно структуре компании. СУБД должна иметь простую и понятную структуру.

1.3.* Можно ли под эту задачу использовать уже существующую СУБД из задач выше и если да, то как лучше это 
реализовать?

1.4. Департамент логистики нуждается в решении задач по быстрому формированию маршрутов доставки материалов 
по объектам и распределению курьеров по маршрутам с доставкой документов. СУБД должна уметь быстро работать
со связями.

1.4.* Можно ли к этой СУБД подключить отдел закупок или для них лучше сформировать свою СУБД в связке с СУБД 
логистов?

1.5.* Можно ли все перечисленные выше задачи решить, используя одну СУБД? Если да, то какую именно?

*Приведите ответ в свободной форме.*
### *Ответ:*
1.1. Реляционная СУБД (PostgreSQL, Microsoft SQL Server, Oracle).

1.1.* Использовать Redis как кэш-слой для хранения предвычисленных хешей.

1.2. Лендинги: Документоориентированная (MongoDB, Firebase) – для гибкости и быстрого прототипирования.
Лендинги требуют простого и быстрого сохранения данных (MongoDB подходит лучше).

CRM: Реляционная (PostgreSQL) или специализированная CRM (Salesforce, HubSpot).
CRM нужна структурированная база с транзакциями (PostgreSQL).

1.2.* Да, реляционной СУБД. Например, PostgreSQL или MySQL.

1.3. Документо-ориентированные или Реляционные СУБД.

1.3.* Да, реляционную СУБД, MySQL.

1.4. Графовые или Реляционные СУБД.

1.4.* Да, можно использовать Реляционные СУБД.

1.5.* Да, можно. Реляционную СУБД.

---

### Задание 2. Транзакции

2.1. Пользователь пополняет баланс счёта телефона, распишите пошагово, какие действия должны произойти для того, чтобы 
транзакция завершилась успешно. Ориентируйтесь на шесть действий.

2.1.* Какие действия должны произойти, если пополнение счёта телефона происходило бы через автоплатёж?

*Приведите ответ в свободной форме.*

### *Ответ:*
2.1. Пользователь пополняет баланс счёта телефона, распишите пошагово, какие действия должны произойти для того, чтобы 
транзакция завершилась успешно. Ориентируйтесь на шесть действий.

1. Начало пополнения счета телефона (далее - СТ) на необходимую сумму с любого другого счета (далее - ЛДС), имеющего возможность пополнить счет телефона на необходимую сумму СТ. Начало транзакции. Соединение с базой данных ЛДС. Чтение баланса ЛДС. Ввод необходимой возможной суммы для перевода на СТ.
2. Далее произойдет уменьшение баланса ЛДС на введенную сумму.
3. Сохранится новый баланс ЛДС.
4. Далее будет соединение с базой данных СТ и чтение баланса СТ.
5. Увеличение баланса СТ на введенную сумму из пункта 1.
6. Сохранится новый баланс СТ. Далее, при успешном выполнении всех действий выше, происходит COMMIT всех изменений и конец транзакции. В ином случае все действия отменяются (ROLLBACK).

2.1.* Какие действия должны произойти, если пополнение счёта телефона происходило бы через автоплатёж?

В выбранное время или событие планировщик запускает автоплатёж с необходимой информацией (номерами счетов и необходимой суммой), остальные действия те же.


---

### Задание 3. SQL vs NoSQL

3.1. Напишите пять преимуществ SQL-систем по отношению к NoSQL. 

3.1.* Какие, на ваш взгляд, преимущества у NewSQL систем перед SQL и NoSQL.

*Приведите ответ в свободной форме.*

### *Ответ:*
3.1. Напишите пять преимуществ SQL-систем по отношению к NoSQL. 

1. Гарантированная целостность данных (ACID)
Транзакции в SQL (например, в PostgreSQL или MySQL) обеспечивают атомарность, согласованность, изолированность и долговечность.
Критично для финансовых операций, бухгалтерии и других сфер, где ошибки недопустимы.
Пример: Перевод денег между счетами либо выполняется полностью, либо откатывается.

2. Жёсткая схема и структура данных
Чёткие таблицы, связи (внешние ключи), типы данных — это минимизирует риски «мусорных» записей.
Проще поддерживать и масштабировать сложные бизнес-процессы.
Пример: В CRM данные клиентов не превратятся в хаотичный набор полей.

3. Мощные аналитические возможности
Сложные JOIN-запросы, агрегации, оконные функции — идеально для отчётов.
Оптимизация для работы с большими объёмами структурированных данных.
Пример: Расчёт прибыли по десяткам проектов с группировкой по месяцам.

4. Универсальность и стандартизация (SQL)
Единый язык запросов (SQL) изучается один раз и работает везде.
Интеграция с большинством BI-инструментов (Power BI, Tableau).
Пример: Миграция с MySQL на Oracle потребует меньше изменений, чем с MongoDB на Cassandra.

5. Безопасность и контроль доступа
Гибкие механизмы ролей, прав (GRANT/REVOKE), шифрование.
Аудит операций (кто и когда изменил данные).
Пример: В банке бухгалтер не сможет случайно удалить платёж.

Когда SQL предпочтительнее NoSQL?
Данные структурированы и связи сложные (финансы, логистика, ERP).
Требуется высокая надёжность и предсказуемость.
Нужна аналитика и сложные запросы.

3.1.* Какие, на ваш взгляд, преимущества у NewSQL систем перед SQL и NoSQL.

Преимущества NewSQL в сочетании в себе лучших сторон SQL и NoSQL. Например, реляционные СУБД, Structured Query Language, ACID поддержка транзакций, горизонтальная масштабируемость и т.д. 

---

### Задание 4. Кластеры

Необходимо производить большое количество вычислений при работе с огромным количеством данных, под эту задачу 
выделено 1000 машин. 

На основе какого критерия будете выбирать тип СУБД и какая модель *распределённых вычислений* 
здесь справится лучше всего и почему?

*Приведите ответ в свободной форме.*

### Ответ:
Буду выбирать на основе необходимых потребностей для стабильной и корректной работы. 
Критерии: 
1. Производительность и нагрузка.
2. Масштабируемость.
3. Согласованность и целостность данных.
4. Общее использование ресурсов.
5. Безопасность и отказоустойчивость.

Лучше всего справится клиент-серверная модель (трехуровневая или многоуровневая архитектура). А точнее кластер серверов с балансировщиком, так как 1000 машин будет производить большое количество вычислений при работе с огромным количеством данных. Данная модель сможет удовлетворить потребности критериев, описанных выше.

---
